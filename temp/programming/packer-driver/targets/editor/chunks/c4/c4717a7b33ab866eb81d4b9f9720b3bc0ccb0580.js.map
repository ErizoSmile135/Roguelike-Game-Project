{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/systems/RoomSystem.ts"],"names":["RoomSystem","Damage","EnemyTag","Health","PlayerTag","Position","TileTag","constructor","entityManager","roomTemplate","createRoom","width","height","i","j","entityId","createEntity","addComponent","layout","enemyId","getEntityWithComponent","console","log","playerId","playerPosition","getComponent","x","y"],"mappings":"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","sourcesContent":["import { Damage } from \"../components/Damage\";\nimport { EnemyTag } from \"../components/EnemyTag\";\nimport { Health } from \"../components/Health\";\nimport { PlayerTag } from \"../components/PlayerTag\";\nimport { Position } from \"../components/Position\";\nimport { TileTag } from \"../components/TileTag\";\nimport { EntityManager } from \"../core/EntityManager\";\nimport { RoomTemplate } from \"../data/types\";\n\nexport class RoomSystem {\n    constructor(private entityManager: EntityManager, \n                   public roomTemplate: RoomTemplate[]){}\n\n    createRoom(){\n      const width = this.roomTemplate[0].width;\n      const height = this.roomTemplate[0].height;\n      \n      for (let i = 0; i < height; i++){\n         for (let j = 0; j < width; j++){\n            const entityId = this.entityManager.createEntity();\n            this.entityManager.addComponent(entityId, TileTag, TileTag);\n            this.entityManager.addComponent(entityId, new Position(j, i), Position);\n\n            if (this.roomTemplate[0].layout[i][j] == 'E'){\n               const enemyId = this.entityManager.createEntity();\n               this.entityManager.addComponent(enemyId, EnemyTag, EnemyTag);\n               this.entityManager.addComponent(enemyId, new Health(100), Health);\n               this.entityManager.addComponent(enemyId, new Damage(5), Damage);\n               this.entityManager.addComponent(enemyId, new Position(j, i), Position);\n            }\n\n            if (this.roomTemplate[0].layout[i][j] == 'P'){\n               if(!this.entityManager.getEntityWithComponent(PlayerTag)[0]){\n                  console.log(this.entityManager.getEntityWithComponent(PlayerTag));\n                  const playerId = this.entityManager.createEntity();\n                  this.entityManager.addComponent(playerId, PlayerTag, PlayerTag);\n                  this.entityManager.addComponent(playerId, new Health(100), Health);\n                  this.entityManager.addComponent(playerId, new Damage(10), Damage);\n                  this.entityManager.addComponent(playerId, new Position(j, i), Position);\n               }\n               else {\n                  const playerId = this.entityManager.getEntityWithComponent(PlayerTag)[0];\n                  const playerPosition = this.entityManager.getComponent(playerId, Position);\n                  if(playerPosition){\n                     playerPosition.x = j;\n                     playerPosition.y = i;\n                  } \n               }\n            }\n         }\n      }\n   }\n}\n\n"]}