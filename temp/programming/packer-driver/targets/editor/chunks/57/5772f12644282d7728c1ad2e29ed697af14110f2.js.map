{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/systems/RoomSystem.ts"],"names":["RoomSystem","Damage","EnemyTag","Health","Position","TileTag","constructor","entityManager","roomTemplate","playerId","createRoom","width","height","i","j","entityId","createEntity","addComponent","layout","enemyId","playerPosition","getComponent","x","y"],"mappings":";;;2EAQaA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;4BAIIL,U,GAAN,MAAMA,UAAN,CAAiB;AACpBM,QAAAA,WAAW,CACDC,aADC,EAEFC,YAFE,EAGDC,QAHC,EAIX;AAAA,eAHUF,aAGV,GAHUA,aAGV;AAAA,eAFSC,YAET,GAFSA,YAET;AAAA,eADUC,QACV,GADUA,QACV;AAAE;;AAEFC,QAAAA,UAAU,GAAE;AACV,gBAAMC,KAAK,GAAG,KAAKH,YAAL,CAAkB,CAAlB,EAAqBG,KAAnC;AACA,gBAAMC,MAAM,GAAG,KAAKJ,YAAL,CAAkB,CAAlB,EAAqBI,MAApC;;AAEA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAApB,EAA4BC,CAAC,EAA7B,EAAgC;AAC7B,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAApB,EAA2BG,CAAC,EAA5B,EAA+B;AAC5B,oBAAMC,QAAQ,GAAG,KAAKR,aAAL,CAAmBS,YAAnB,EAAjB;AACA,mBAAKT,aAAL,CAAmBU,YAAnB,CAAgCF,QAAhC,EAA0C;AAAA;AAAA,uCAA1C;AAAA;AAAA;AACA,mBAAKR,aAAL,CAAmBU,YAAnB,CAAgCF,QAAhC,EAA0C;AAAA;AAAA,wCAAaD,CAAb,EAAgBD,CAAhB,CAA1C;AAAA;AAAA;;AAEA,kBAAI,KAAKL,YAAL,CAAkB,CAAlB,EAAqBU,MAArB,CAA4BL,CAA5B,EAA+BC,CAA/B,KAAqC,GAAzC,EAA6C;AAC1C,sBAAMK,OAAO,GAAG,KAAKZ,aAAL,CAAmBS,YAAnB,EAAhB;AACA,qBAAKT,aAAL,CAAmBU,YAAnB,CAAgCE,OAAhC,EAAyC;AAAA;AAAA,2CAAzC;AAAA;AAAA;AACA,qBAAKZ,aAAL,CAAmBU,YAAnB,CAAgCE,OAAhC,EAAyC;AAAA;AAAA,sCAAW,GAAX,CAAzC;AAAA;AAAA;AACA,qBAAKZ,aAAL,CAAmBU,YAAnB,CAAgCE,OAAhC,EAAyC;AAAA;AAAA,sCAAW,CAAX,CAAzC;AAAA;AAAA;AACA,qBAAKZ,aAAL,CAAmBU,YAAnB,CAAgCE,OAAhC,EAAyC;AAAA;AAAA,0CAAaL,CAAb,EAAgBD,CAAhB,CAAzC;AAAA;AAAA;AACF;;AAED,kBAAI,KAAKL,YAAL,CAAkB,CAAlB,EAAqBU,MAArB,CAA4BL,CAA5B,EAA+BC,CAA/B,KAAqC,GAAzC,EAA6C;AAC1C,sBAAMM,cAAc,GAAG,KAAKb,aAAL,CAAmBc,YAAnB,CAAgC,KAAKZ,QAArC;AAAA;AAAA,yCAAvB;;AACA,oBAAGW,cAAH,EAAkB;AACfA,kBAAAA,cAAc,CAACE,CAAf,GAAmBR,CAAnB;AACAM,kBAAAA,cAAc,CAACG,CAAf,GAAmBV,CAAnB;AACF;AACH;AACH;AACH;AACH;;AAlCoB,O","sourcesContent":["import { Damage } from \"../components/Damage\";\nimport { EnemyTag } from \"../components/Tag/EnemyTag\";\nimport { Health } from \"../components/Health\";\nimport { Position } from \"../components/Position\";\nimport { TileTag } from \"../components/Tag/TileTag\";\nimport { EntityManager } from \"../core/EntityManager\";\nimport { RoomTemplate } from \"../data/types\";\n\nexport class RoomSystem {\n    constructor(\n      private entityManager: EntityManager, \n      public roomTemplate: RoomTemplate[],\n      private playerId: number\n   ){}\n\n    createRoom(){\n      const width = this.roomTemplate[0].width;\n      const height = this.roomTemplate[0].height;\n      \n      for (let i = 0; i < height; i++){\n         for (let j = 0; j < width; j++){\n            const entityId = this.entityManager.createEntity();\n            this.entityManager.addComponent(entityId, new TileTag(), TileTag);\n            this.entityManager.addComponent(entityId, new Position(j, i), Position);\n\n            if (this.roomTemplate[0].layout[i][j] == 'E'){\n               const enemyId = this.entityManager.createEntity();\n               this.entityManager.addComponent(enemyId, new EnemyTag(), EnemyTag);\n               this.entityManager.addComponent(enemyId, new Health(100), Health);\n               this.entityManager.addComponent(enemyId, new Damage(5), Damage);\n               this.entityManager.addComponent(enemyId, new Position(j, i), Position);\n            }\n\n            if (this.roomTemplate[0].layout[i][j] == 'P'){\n               const playerPosition = this.entityManager.getComponent(this.playerId, Position);\n               if(playerPosition){\n                  playerPosition.x = j;\n                  playerPosition.y = i;\n               } \n            }\n         }\n      }\n   }\n}\n\n"]}