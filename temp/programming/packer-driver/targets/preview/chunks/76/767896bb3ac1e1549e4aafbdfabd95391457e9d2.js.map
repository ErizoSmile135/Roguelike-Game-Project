{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/core/EventBus.ts"],"names":["EventBus","listeners","Map","on","event","fn","has","set","Set","get","add","off","delete","emit","payload","forEach","eventBus"],"mappings":";;;iBAEaA,Q;;;;;;;;;;;;;0BAAAA,Q,GAAN,MAAMA,QAAN,CAAe;AAAA;AAAA,eACZC,SADY,GACA,IAAIC,GAAJ,EADA;AAAA;;AAGbC,QAAAA,EAAE,CAAIC,KAAJ,EAAmBC,EAAnB,EAA0C;AACjD,cAAI,CAAC,KAAKJ,SAAL,CAAeK,GAAf,CAAmBF,KAAnB,CAAL,EAAgC;AAC9B,iBAAKH,SAAL,CAAeM,GAAf,CAAmBH,KAAnB,EAA0B,IAAII,GAAJ,EAA1B;AACD;;AACD,eAAKP,SAAL,CAAeQ,GAAf,CAAmBL,KAAnB,EAA2BM,GAA3B,CAA+BL,EAA/B;AACD;;AAEMM,QAAAA,GAAG,CAAIP,KAAJ,EAAmBC,EAAnB,EAA0C;AAAA;;AAClD,sCAAKJ,SAAL,CAAeQ,GAAf,CAAmBL,KAAnB,0CAA2BQ,MAA3B,CAAkCP,EAAlC;AACD;;AAEMQ,QAAAA,IAAI,CAAIT,KAAJ,EAAmBU,OAAnB,EAAqC;AAAA;;AAC9C,uCAAKb,SAAL,CAAeQ,GAAf,CAAmBL,KAAnB,2CAA2BW,OAA3B,CAAoCV,EAAD,IAAqB;AACtDA,YAAAA,EAAE,CAACS,OAAD,CAAF;AACD,WAFD;AAGD;;AAlBmB,O;;0BAqBTE,Q,GAAW,IAAIhB,QAAJ,E","sourcesContent":["type Callback<T> = (payload: T) => void;\r\n\r\nexport class EventBus {\r\n  private listeners = new Map<string, Set<Callback<any>>>();\r\n\r\n  public on<T>(event: string, fn: Callback<T>): void {\r\n    if (!this.listeners.has(event)) {\r\n      this.listeners.set(event, new Set());\r\n    }\r\n    this.listeners.get(event)!.add(fn as Callback<any>);\r\n  }\r\n\r\n  public off<T>(event: string, fn: Callback<T>): void {\r\n    this.listeners.get(event)?.delete(fn as Callback<any>);\r\n  }\r\n\r\n  public emit<T>(event: string, payload: T): void {\r\n    this.listeners.get(event)?.forEach((fn: Callback<T>) => {\r\n      fn(payload);\r\n    });\r\n  }\r\n}\r\n\r\nexport const eventBus = new EventBus();\r\n"]}