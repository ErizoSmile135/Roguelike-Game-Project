{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/core/SceneController.ts"],"names":["_decorator","Component","Prefab","Node","gameManager","initializeGame","InputComponent","ccclass","property","SceneController","type","start","prefabs","Tile","tilePrefab","Player","playerPrefab","Enemy","enemyPrefab","setPrefabs","setGameRoot","gameRoot","createPlayer","initializeSystems","roomSystem","createRoom","renderSystem","render","onTap","position","playerId","getPlayerEntityId","input","handlePlayerInput","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;;AAC/BC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,c,iBAAAA,c;;AACbC,MAAAA,c,iBAAAA,c;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;iCAGjBS,e,WADZF,OAAO,CAAC,iBAAD,C,UAGHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER;AAAR,OAAD,C,UAERM,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER;AAAR,OAAD,C,UAERM,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAER;AAAR,OAAD,C,UAGRM,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,2BAVb,MACaM,eADb,SACqCR,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAa3CU,QAAAA,KAAK,GAAG;AACJ,cAAMC,OAAO,GAAG;AACZC,YAAAA,IAAI,EAAE,KAAKC,UADC;AAEZC,YAAAA,MAAM,EAAE,KAAKC,YAFD;AAGZC,YAAAA,KAAK,EAAE,KAAKC;AAHA,WAAhB;AAMA;AAAA;AAAA,gDAAe,MAAI;AACf;AAAA;AAAA,4CAAYC,UAAZ,CAAuBP,OAAvB;AACA;AAAA;AAAA,4CAAYQ,WAAZ,CAAwB,KAAKC,QAA7B;AACA;AAAA;AAAA,4CAAYC,YAAZ;AACA;AAAA;AAAA,4CAAYC,iBAAZ;AACA;AAAA;AAAA,4CAAYC,UAAZ,CAAuBC,UAAvB;AACA;AAAA;AAAA,4CAAYC,YAAZ,CAAyBC,MAAzB;AACH,WAPD;AAQH;;AAEDC,QAAAA,KAAK,CAACC,QAAD,EAAiB;AAClB,cAAMC,QAAQ,GAAG;AAAA;AAAA,0CAAYC,iBAAZ,EAAjB;AACA,cAAMC,KAAK,GAAG;AAAA;AAAA,gDAAmBF,QAAnB,EAA6B,MAA7B,EAAqCD,QAArC,CAAd;AACA;AAAA;AAAA,0CAAYI,iBAAZ,CAA8BD,KAA9B;AACH;;AAEDE,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAtC0C,O;;;;;iBAGd,I;;;;;;;iBAEE,I;;;;;;;iBAED,I;;;;;;;iBAGL,I","sourcesContent":["import { _decorator, Component, Prefab, Node, Vec2 } from 'cc';\nimport { gameManager, initializeGame } from './Game';\nimport { InputComponent } from '../components/InputComponent';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SceneController')\nexport class SceneController extends Component {\n    \n    @property({ type: Prefab }) \n    private tilePrefab: Prefab = null!;\n    @property({ type: Prefab }) \n    private playerPrefab: Prefab = null!;\n    @property({ type: Prefab }) \n    private enemyPrefab: Prefab = null!;\n\n    @property({ type: Node })\n    private gameRoot: Node = null!;\n\n\n    start() {\n        const prefabs = {\n            Tile: this.tilePrefab,\n            Player: this.playerPrefab,\n            Enemy: this.enemyPrefab\n        };\n\n        initializeGame(()=>{\n            gameManager.setPrefabs(prefabs);\n            gameManager.setGameRoot(this.gameRoot); \n            gameManager.createPlayer();\n            gameManager.initializeSystems();\n            gameManager.roomSystem.createRoom();\n            gameManager.renderSystem.render();\n        })\n    }\n\n    onTap(position: Vec2) {\n        const playerId = gameManager.getPlayerEntityId();\n        const input = new InputComponent(playerId, 'move', position);\n        gameManager.handlePlayerInput(input);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n}\n\n"]}