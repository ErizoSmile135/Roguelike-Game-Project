{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/config/RoomConfig.ts"],"names":["loadRoomTemplates","callback","loaded","resources","load","path","JsonAsset","err","asset","console","error","RoomTemplates","push","json","RoomPaths","length","CELL_SIZE"],"mappings":";;;;;AAQO,WAASA,iBAAT,CAA2BC,QAA3B,EAAiD;AACtD,QAAIC,MAAM,GAAG,CAAb;;AADsD,qCAGxB;AAC5BC,MAAAA,SAAS,CAACC,IAAV,CAAeC,IAAf,EAAqBC,SAArB,EAAgC,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC9C,YAAID,GAAJ,EAAS;AACPE,UAAAA,OAAO,CAACC,KAAR,4FAAiCL,IAAjC,EAAyCE,GAAzC;AACA;AACD;;AAEDI,QAAAA,aAAa,CAACC,IAAd,CAAmBJ,KAAK,CAACK,IAAzB;AACAX,QAAAA,MAAM;;AAEN,YAAIA,MAAM,KAAKY,SAAS,CAACC,MAAzB,EAAiC;AAC/Bd,UAAAA,QAAQ;AACT;AACF,OAZD;AAaD,KAjBqD;;AAGtD,SAAK,IAAMI,IAAX,IAAmBS,SAAnB;AAAA;AAAA;AAeD;;;;;;+BAlBed,iB;;;;;;;;;AARPG,MAAAA,S,OAAAA,S;AAAWG,MAAAA,S,OAAAA,S;;;;;;;;;2BAGPQ,S,GAAY,CAAC,aAAD,C;;2BACZE,S,GAAY,E;;+BAEZL,a,GAAgC,E","sourcesContent":["import { resources, JsonAsset } from 'cc';\r\nimport { RoomTemplate } from \"../data/types\";\r\n\r\nexport const RoomPaths = ['rooms/room1'];\r\nexport const CELL_SIZE = 64;\r\n\r\nexport const RoomTemplates: RoomTemplate[] = [];\r\n\r\nexport function loadRoomTemplates(callback: () => void) {\r\n  let loaded = 0;\r\n\r\n  for (const path of RoomPaths) {\r\n    resources.load(path, JsonAsset, (err, asset) => {\r\n      if (err) {\r\n        console.error(`Ошибка загрузки ${path}`, err);\r\n        return;\r\n      }\r\n\r\n      RoomTemplates.push(asset.json as RoomTemplate);\r\n      loaded++;\r\n\r\n      if (loaded === RoomPaths.length) {\r\n        callback();\r\n      }\r\n    });\r\n  }\r\n}"]}