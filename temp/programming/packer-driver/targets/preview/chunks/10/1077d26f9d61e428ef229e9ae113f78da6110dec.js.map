{"version":3,"sources":["file:///C:/GameECSProject/assets/scripts/core/SceneController.ts"],"names":["_decorator","Component","Prefab","Node","gameManager","initializeGame","ccclass","property","SceneController","type","onLoad","instance","start","prefabs","Tile","tilePrefab","Player","playerPrefab","Enemy","enemyPrefab","setPrefabs","setGameRoot","gameRoot","createPlayer","initializeSystems","roomSystem","createRoom","renderSystem","render","onTileTapped","position","update","deltaTime","updateSystems"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;;AAC/BC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,c,iBAAAA,c;;;;;;;;;OAGhB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;iCAGjBQ,e,WADZF,OAAO,CAAC,iBAAD,C,UAIHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,UAERK,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,UAERK,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEP;AAAR,OAAD,C,UAGRK,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEN;AAAR,OAAD,C,sCAXb,MACaK,eADb,SACqCP,SADrC,CAC+C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAa3CS,QAAAA,MAAM,GAAG;AACLF,UAAAA,eAAe,CAACG,QAAhB,GAA2B,IAA3B;AACH;;AAEDC,QAAAA,KAAK,GAAG;AACJ,cAAMC,OAAO,GAAG;AACZC,YAAAA,IAAI,EAAE,KAAKC,UADC;AAEZC,YAAAA,MAAM,EAAE,KAAKC,YAFD;AAGZC,YAAAA,KAAK,EAAE,KAAKC;AAHA,WAAhB;AAMA;AAAA;AAAA,gDAAe,MAAI;AACf;AAAA;AAAA,4CAAYC,UAAZ,CAAuBP,OAAvB;AACA;AAAA;AAAA,4CAAYQ,WAAZ,CAAwB,KAAKC,QAA7B;AACA;AAAA;AAAA,4CAAYC,YAAZ;AACA;AAAA;AAAA,4CAAYC,iBAAZ;AACA;AAAA;AAAA,4CAAYC,UAAZ,CAAuBC,UAAvB;AACA;AAAA;AAAA,4CAAYC,YAAZ,CAAyBC,MAAzB;AACH,WAPD;AAQH;AAED;AACJ;AACA;AACA;AACA;;;AAEIC,QAAAA,YAAY,CAACC,QAAD,EAAqB;AAC7B;AAAA;AAAA,0CAAYD,YAAZ,CAAyBC,QAAzB;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB;AAAA;AAAA,0CAAYC,aAAZ,CAA0BD,SAA1B;AACH;;AA9C0C,O,UAC7BrB,Q;;;;;iBAGe,I;;;;;;;iBAEE,I;;;;;;;iBAED,I;;;;;;;iBAGL,I","sourcesContent":["import { _decorator, Component, Prefab, Node, Vec2 } from 'cc';\nimport { gameManager, initializeGame } from './Game';\nimport { InputComponent } from '../components/core/InputComponent';\nimport { Position } from '../components/Position';\nconst { ccclass, property } = _decorator;\n\n@ccclass('SceneController')\nexport class SceneController extends Component {\n    public static instance: SceneController;\n    \n    @property({ type: Prefab }) \n    private tilePrefab: Prefab = null!;\n    @property({ type: Prefab }) \n    private playerPrefab: Prefab = null!;\n    @property({ type: Prefab }) \n    private enemyPrefab: Prefab = null!;\n\n    @property({ type: Node })\n    private gameRoot: Node = null!;\n\n    onLoad() {\n        SceneController.instance = this;\n    }\n\n    start() {\n        const prefabs = {\n            Tile: this.tilePrefab,\n            Player: this.playerPrefab,\n            Enemy: this.enemyPrefab\n        };\n\n        initializeGame(()=>{\n            gameManager.setPrefabs(prefabs);\n            gameManager.setGameRoot(this.gameRoot); \n            gameManager.createPlayer();\n            gameManager.initializeSystems();\n            gameManager.roomSystem.createRoom();\n            gameManager.renderSystem.render();\n        })\n    }\n\n    /*onTap(position: Position) {\n        const playerId = gameManager.getPlayerEntityId();\n        const input = new InputComponent(playerId, 'move', position);\n        gameManager.handleInput(input);\n    }*/\n\n    onTileTapped(position: Position) {\n        gameManager.onTileTapped(position);\n    }\n\n    update(deltaTime: number) {\n        gameManager.updateSystems(deltaTime);\n    }\n}\n\n"]}